<?php

/**
 * ProfileCourseTable
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class ProfileCourseTable extends Doctrine_Table {

  /**
   * Returns an instance of this class.
   *
   * @return object ProfileCourseTable
   */
  public static function getInstance() {
    return Doctrine_Core::getTable('ProfileCourse');
  }

  public function deleteByCoursesIdsAndProfileId($courseIds, $profileId) {
    $query = $this->createQuery()
        ->delete()
        ->whereIn('course_id', $courseIds)
        ->andWhere("profile_id = ?", $profileId);

    return $query->execute();
  }

  public function deleteByCourseIdAndProfileIds($courseId, $profileIds = array()) {
    $query = $this->createQuery()
        ->delete()
        ->whereIn('profile_id', $profileIds)
        ->andWhere("course_id = ?", $courseId);

    return $query->execute();
  }

  public function findOneByProfileIdAndCourseId($profileId, $courseId) {
    $query = $this->createQuery()
        ->where('profile_id = ?', $profileId)
        ->andWhere("course_id = ?", $courseId);

    return $query->fetchOne();
  }

  public function findByCourseIdAndIsInstructor($courseId, $isInstructor) {
    $query = $this->createQuery('pc')
        ->innerJoin('pc.Profile p')
        ->Where("course_id = ?", $courseId)
        ->andWhere('p.is_instructor = ?', $isInstructor);

    return $query->execute();
  }

}